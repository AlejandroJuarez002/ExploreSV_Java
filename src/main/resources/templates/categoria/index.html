<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/layouts/_mainLayout">

<div layout:fragment="content"
     class="container-fluid p-5 position-relative">

  <!-- Overlay translúcido -->
  <div style="position: absolute; top:0; left:0; width:100%; height:100%; background-color: rgba(255,255,255,0.75); z-index:1;"></div>

  <!-- Contenido -->
  <div class="container position-relative" style="z-index:2;">

    <!-- SweetAlerts -->
    <div th:if="${msg != null}">
      <script>
        Swal.fire({
            title: "Confirmación",
            text: '[[${msg}]]',
            icon: "success"
        });
      </script>
    </div>

    <div th:if="${error != null}">
      <script>
        Swal.fire({
            title: "Error",
            text: '[[${error}]]',
            icon: "error"
        });
      </script>
    </div>

    <!-- Título y botón -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="text-primary fw-bold">Listado de Categorías</h2>
      <a th:href="@{/categorias/create}"
         class="btn btn-lg shadow-sm text-white border-0 px-4 py-2 rounded-2"
         style="background-color: #4facfe;">
        ➕ Nueva categoría
      </a>
    </div>

    <!-- Card contenedor -->
    <div class="card shadow-sm rounded-4 border-0">
      <div class="card-body p-4" style="background-color: #ffffff;">
        <div class="table-responsive">
          <table class="table table-hover align-middle">
            <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Acciones</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${categorias}">
              <td th:text="${item.id}"></td>
              <td th:text="${item.nombre}"></td>
              <td>
                <a th:href="@{/categorias/details/{id} (id = ${item.id})}"
                   class="btn btn-sm me-1 mb-1 text-secondary border-secondary rounded-2"
                   onmouseover="this.style.backgroundColor='#f8f9fa'; this.style.color='#6c757d';"
                   onmouseout="this.style.backgroundColor='transparent'; this.style.color='#6c757d';">
                  Detalles
                </a>
                <a th:href="@{/categorias/edit/{id} (id = ${item.id})}"
                   class="btn btn-sm me-1 mb-1 text-info border-info rounded-2"
                   onmouseover="this.style.backgroundColor='#f8f9fa'; this.style.color='#0dcaf0';"
                   onmouseout="this.style.backgroundColor='transparent'; this.style.color='#0dcaf0';">
                  Editar
                </a>
                <a th:href="@{/categorias/remove/{id} (id = ${item.id})}"
                   class="btn btn-sm mb-1 text-danger border-danger rounded-2"
                   onmouseover="this.style.backgroundColor='#f8f9fa'; this.style.color='#dc3545';"
                   onmouseout="this.style.backgroundColor='transparent'; this.style.color='#dc3545';">
                  Eliminar
                </a>
              </td>
            </tr>
            </tbody>
          </table>
        </div>

        <!-- Paginación -->
        <nav aria-label="Page navigation example" class="mt-3">
          <ul class="pagination justify-content-center">
            <li class="page-item" th:each="pageNumber : ${pageNumbers}">
              <a class="page-link" th:href="@{|/categorias?page=${pageNumber}|}"
                 th:text="${pageNumber}"></a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>